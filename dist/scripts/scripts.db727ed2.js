"use strict";angular.module("fileTaBobineApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/main",{templateUrl:"views/page1.html",controller:"MainCtrl",controllerAs:"main"}).when("/story-selector",{templateUrl:"views/page2.html",controller:"StoryselectorCtrl",controllerAs:"storyselector"}).when("/webcam-photo/:id",{templateUrl:"views/page3.html",controller:"WebcamphotoCtrl",controllerAs:"webcamphoto"}).when("/end",{templateUrl:"views/page4.html",controller:"PrintCtrl",controllerAs:"print"}).otherwise({redirectTo:"/main"})}]),angular.module("fileTaBobineApp").controller("MainCtrl",function(){}),angular.module("fileTaBobineApp").controller("StoryselectorCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("fileTaBobineApp").controller("WebcamphotoCtrl",function(){function a(){h=document.getElementById("video"),i=document.getElementById("canvas"),j=document.getElementById("photo"),k=document.getElementById("startbutton"),navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getMedia({video:!0,audio:!1},function(a){if(navigator.mozGetUserMedia)h.mozSrcObject=a;else{var b=window.URL||window.webkitURL;h.src=b.createObjectURL(a)}h.play()},function(a){console.log("An error occured! "+a)}),h.addEventListener("canplay",function(a){g||(f=h.videoHeight/(h.videoWidth/e),isNaN(f)&&(f=e/(4/3)),h.setAttribute("width",e),h.setAttribute("height",f),i.setAttribute("width",e),i.setAttribute("height",f),g=!0)},!1),k.addEventListener("click",function(a){c(),a.preventDefault()},!1),b()}function b(){var a=i.getContext("2d");a.fillStyle="#AAA",a.fillRect(0,0,i.width,i.height);var b=i.toDataURL("image/png");j.setAttribute("src",b)}function c(){var a=i.getContext("2d");if(e&&f){i.width=e,i.height=f,a.drawImage(h,0,0,e,f);var c=document.getElementById("story-mask");a.drawImage(c,0,0,e,f);var d=i.toDataURL("image/png");j.setAttribute("src",d),h.pause()}else b()}var d=this,e=1440,f=0,g=!1,h=null,i=null,j=null,k=null;a(),d.imageSrc="images/UIPage3.39c5edc1.png"}),angular.module("fileTaBobineApp").controller("PrintCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("fileTaBobineApp").run(["$templateCache",function(a){a.put("views/page1.html",'<a class="page page1" ng-href="#/story-selector"></a>'),a.put("views/page2.html",'<div class="page page2"> <img src="images/bobine-title.fe4c78ea.png" alt="Choisis ta bobine" class="title"> <!-- <div class="container"> --> <div class="bobines row"> <div class="col-sm-4 text-center"> <a ng-href="#/webcam-photo/0" class="bobine1"> <img src="images/bobine1.b4eb4d95.jpg" alt=""> </a> </div> <div class="col-sm-4 text-center"> <a ng-href="#/webcam-photo/1" class="bobine2"> <img src="images/bobine2.2717e1cf.jpg" alt=""> </a> </div> <div class="col-sm-4 text-center"> <a ng-href="#/webcam-photo/2" class="bobine3"> <img src="images/bobine3.b07c7e89.jpg" alt=""> </a> </div> </div> <div class="bobines row"> <div class="col-sm-offset-2 col-sm-4 text-center"> <a ng-href="#/webcam-photo/3" class="bobine4"> <img src="images/bobine4.95b89985.jpg" alt=""> </a> </div> <div class="col-sm-4 text-center"> <a ng-href="#/webcam-photo/4" class="bobine5"> <img src="images/bobine5.a14ea121.jpg" alt=""> </a> </div> </div> <!-- </div> --> </div>'),a.put("views/page3.html",'<div class="camera"> <video id="video">Video stream not available.</video> <button id="startbutton">Take photo</button> </div> <img ng-src="{{ webcamphoto.imageSrc }}" id="story-mask"> <!-- hidden --> <canvas id="canvas"></canvas> <div class="output"> <img id="photo" alt="The screen capture will appear in this box."> </div>'),a.put("views/page4.html",'<div class="page page4"></div>')}]);